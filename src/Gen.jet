class Gen
  include TaskBase, Stream

  def initialize(func)
    {func: func,
     task_list: []}
  end

  def initialize(func, task_list)
    {func: func,
     task_list: task_list}
  end

  def spawn_actor(next_actor)
    value = @func.()
    if value == :eos
      next_actor ! :eos
    else
      next_actor ! value
      spawn_actor(next_actor)
    end
  end

  def update_task_list(task_list)
    new Gen(@func, task_list)
  end

end