class Future
  def initialize(func)
    pid = spawn do
      value = func.()
      receive
      	case {:future, from, :get}
      	  from ! {:future, self(), value}
      end
    end
    {pid: pid}
  end

  def get()
    @pid ! {:future, self(), :get}
    receive
      case {:future, pid, value}
        value
    end
  end
end